<html>
<body>
<h1>Hidamari Test</h1>

<h2>cmd get</h2>
<form action="/cmd" method="get">
<div>cmd  : <input type="text" name="cmd"></div>
<div>arg1 : <input type="text" name="arg1"></div>
<div>arg2 : <input type="text" name="arg2"></div>
<button type="submit">go</button>
</form>

<h2>cmd post</h2>
<form action="/cmd" method="post">
<div>cmd  : <input type="text" name="cmd"></div>
<div>arg1 : <input type="text" name="arg1"></div>
<div>arg2 : <input type="text" name="arg2"></div>
<button type="submit">go</button>
</form>

<h2>status post</h2>
<form action="/status" method="get">
<button type="submit">go</button>
</form>

<h2>spec_h post</h2>
<form action="/spec_head" method="get">
<button type="submit">go</button>
</form>

<h2>status_ws</h2>
<div>cmd  : <input type="text" name="cmd" class="sws_inp"></div>
<button type="button" class="sws_go">go</button>
</form>
<textarea class="sws_txt_0"></textarea>
<textarea class="sws_txt_1"></textarea>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
$(
function()
{
    var ws = new WebSocket("ws://" + location.host + "/ws");


    ws.onopen =
        function(e)
        {
            console.log('Socket OK');
        }
    ;

    ws.onmessage =
        function(e)
        {
            var j = $.parseJSON( e.data );


            if( j.Ok && j.Ok.spec_t )
            {
                $( ".sws_txt_1" ).val( e.data );
            }
            else
            {
                $( ".sws_txt_0" ).val( e.data );
            }
        }
    ;

    ws.onclose =
        function(e)
        {
            console.log( e );
        }
    ;


    ws.onError =
        function(e)
        {
            console.log( e );
        }
    ;

    $( ".sws_go" ).click(
        function()
        {
            ws.send( $( ".sws_inp" ).val() );
        }
    );
}
);
</script>

</body>
</html>
